<div class="clientes-container">
  <!-- Header con título y botón de acción -->
  <div class="header-section">
    <div class="title-section">
      <h1 class="page-title">
        <span class="material-icons title-icon">group</span>
        Gestión de Clientes
      </h1>
      <p class="page-subtitle">Administra la información de tus clientes</p>
    </div>
    
    <button 
      class="fab-button" 
      (click)="mostrarFormulario()"
      [disabled]="!roleService.isAdmin()"
    >
      <span class="material-icons">person_add</span>
      Nuevo Cliente
    </button>
  </div>

  <!-- Formulario de Cliente -->
  <div class="form-card" *ngIf="mostrarForm">
    <div class="form-header">
      <h2 class="form-title">
        <span class="material-icons">{{ clienteEditando ? 'edit' : 'person_add' }}</span>
        {{ clienteEditando ? 'Editar Cliente' : 'Nuevo Cliente' }}
      </h2>
    </div>
    
    <form (ngSubmit)="guardarCliente()" #clienteForm="ngForm" class="client-form">
      <div class="form-row">
        <div class="form-field">
          <label class="field-label">Nombre *</label>
          <input 
            type="text" 
            class="material-input" 
            [(ngModel)]="cliente.nombre" 
            name="nombre" 
            required
            placeholder="Ingresa el nombre del cliente"
          >
        </div>
        
        <div class="form-field">
          <label class="field-label">Apellido</label>
          <input 
            type="text" 
            class="material-input" 
            [(ngModel)]="cliente.apellido" 
            name="apellido"
            placeholder="Ingresa el apellido"
          >
        </div>
        
        <div class="form-field">
          <label class="field-label">Email</label>
          <input 
            type="email" 
            class="material-input" 
            [(ngModel)]="cliente.email" 
            name="email"
            placeholder="cliente@email.com"
          >
        </div>
      </div>
      
      <div class="form-field full-width">
        <label class="field-label">Dirección</label>
        <textarea 
          class="material-textarea" 
          [(ngModel)]="cliente.direccion" 
          name="direccion" 
          rows="2"
          placeholder="Dirección completa del cliente..."
        ></textarea>
      </div>
      
      <div class="form-field full-width">
        <label class="field-label">Observaciones</label>
        <textarea 
          class="material-textarea" 
          [(ngModel)]="cliente.observaciones" 
          name="observaciones" 
          rows="3"
          placeholder="Notas adicionales sobre el cliente..."
        ></textarea>
      </div>
      
      <div class="form-actions">
        <button 
          type="submit" 
          class="primary-button" 
          [disabled]="!clienteForm.valid"
        >
          <span class="material-icons">{{ clienteEditando ? 'update' : 'save' }}</span>
          {{ clienteEditando ? 'Actualizar' : 'Guardar' }}
        </button>
        <button 
          type="button" 
          class="secondary-button" 
          (click)="cancelarEdicion()"
        >
          <span class="material-icons">cancel</span>
          Cancelar
        </button>
      </div>
    </form>
  </div>

  <!-- Lista de Clientes -->
  <div class="table-card">
    <div class="table-header">
      <h3 class="table-title">
        <span class="material-icons">list</span>
        Lista de Clientes
      </h3>
      
      <div class="search-container">
        <span class="material-icons search-icon">search</span>
        <input 
          type="text" 
          class="search-input" 
          placeholder="Buscar clientes..." 
          [(ngModel)]="terminoBusqueda" 
          (input)="filtrarClientes()"
        >
      </div>
    </div>
    
    <div class="table-container">
      <table class="clients-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Email</th>
            <th>Dirección</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let cliente of clientesFiltrados" class="table-row">
            <td class="id-cell">{{ cliente.id }}</td>
            <td class="name-cell">
              <div class="client-info">
                <span class="client-name">{{ cliente.nombre }} {{ cliente.apellido }}</span>
                <span class="client-registration" *ngIf="cliente.fechaRegistro">
                  Registrado: {{ cliente.fechaRegistro | date:'dd/MM/yyyy' }}
                </span>
              </div>
            </td>
            <td class="email-cell">
              <span class="email-text">{{ cliente.email || 'Sin email' }}</span>
            </td>
            <td class="address-cell">
              <span class="address-text">{{ cliente.direccion || 'Sin dirección' }}</span>
            </td>
            <td class="status-cell">
              <span class="status-badge" [ngClass]="{'active': cliente.activo, 'inactive': !cliente.activo}">
                <span class="material-icons status-icon">
                  {{ cliente.activo ? 'check_circle' : 'cancel' }}
                </span>
                {{ cliente.activo ? 'Activo' : 'Inactivo' }}
              </span>
            </td>
            <td class="actions-cell">
              <button 
                class="action-button edit-button" 
                (click)="editarCliente(cliente)"
                title="Editar cliente"
              >
                <span class="material-icons">edit</span>
              </button>
              <button 
                class="action-button delete-button" 
                (click)="eliminarCliente(cliente.id!)"
                title="Eliminar cliente"
              >
                <span class="material-icons">delete</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div *ngIf="clientesFiltrados.length === 0" class="empty-state">
      <span class="material-icons empty-icon">group</span>
      <h3>No se encontraron clientes</h3>
      <p>{{ terminoBusqueda ? 'Intenta con otros términos de búsqueda' : 'Comienza agregando tu primer cliente' }}</p>
    </div>
  </div>

  <!-- Botón de navegación -->
  <div class="navigation-section">
    <button class="back-button" (click)="volverAlMenu()">
      <span class="material-icons">arrow_back</span>
      Volver al Menú
    </button>
  </div>
</div>
